(this["webpackJsonprxcp-server-admin"]=this["webpackJsonprxcp-server-admin"]||[]).push([[0],{32:function(e,t,a){e.exports=a(61)},37:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(28),o=a.n(l),c=(a(37),a(3));var s=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("span",null,"Server 1"),r.a.createElement("div",null,r.a.createElement("button",{"data-dropdown":!0,className:"flex items-center px-3 py-2 focus:outline-none hover:bg-gray-200 hover:rounded-md",type:"button"},r.a.createElement("img",{src:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=100&h=100&q=80",alt:"Profle",className:"h-8 w-8 rounded-full"}),r.a.createElement("svg",{className:"fill-current w-3 ml-4",viewBox:"0 0 407.437 407.437"},r.a.createElement("path",{d:"M386.258 91.567l-182.54 181.945L21.179 91.567 0 112.815 203.718 315.87l203.719-203.055z"}))))))};var m=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s,null))},i=a(12),u=Object(n.createContext)({authToken:"",setAuthToken:function(e){}});function d(){return Object(n.useContext)(u)}var p=function(e){var t=e.type,a=void 0===t?"text":t,n=e.register,l=e.className,o=e.name,c=e.addClass,s=e.placeholder,m=e.required,i=l||"w-full p-2 border border-gray-600 border-solid outline-none";return r.a.createElement("input",{type:a,ref:n({required:m}),name:o,className:"".concat(i," ").concat(c),placeholder:s})},E=a(11),g=a.n(E),h=a(30),f=a(1);function b(e,t){switch(t.type){case"loading":return Object(i.a)({},e,{loading:!0});case"loaded":return Object(i.a)({},e,{loading:!1});case"error":return"object"===typeof t.data&&t.data.length>=1?Object(i.a)({},e,{serverErrors:t.data}):Object(i.a)({},e,{serverErrors:[{property:"all",constraints:{err:t.data.message?t.data.message:t.data.toString()}}]});default:throw new Error}}var v=function(){var e,t=Object(f.g)(),a=Object(h.a)(),l=a.register,o=a.errors,s=a.handleSubmit,m=d(),i=Object(n.useReducer)(b,{loading:!1,serverErrors:[]}),u=Object(c.a)(i,2),E=u[0],v=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"px-8"},E.serverErrors.length>=1&&r.a.createElement("div",{className:"bg-red-200 py-2 pl-8 pr-2"},(e=E.serverErrors,r.a.createElement("ul",null,e.length>=1&&e.map((function(e){return r.a.createElement("li",{className:"list-disc text-sm",key:e.property},Object.values(e.constraints))})))))),r.a.createElement("form",{onSubmit:s((function(e){v({type:"loading"}),g.a.post("/api/auth/login",e).then((function(e){e.data.accessToken?(m.setAuthToken(e.data.accessToken),t.push("/admin")):v({type:"error",data:"Server error! Please contact the Administrator."})})).catch((function(e){v({type:"error",data:e.response.data})})).finally((function(){v({type:"loaded"})}))})),className:"px-8 pt-3 pb-8"},r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",null,r.a.createElement(p,{placeholder:"Email",name:"email",register:l,required:!0}),r.a.createElement("span",{className:"text-sm"},o.email&&"Email is required"))),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",null,r.a.createElement(p,{type:"password",placeholder:"Password",name:"password",register:l,required:!0}),r.a.createElement("span",{className:"text-sm"},o.password&&"Password is required"))),r.a.createElement("button",{type:"submit",className:"focus:outline-none px-4 py-2 w-full cursor-pointer ".concat(E.loading?"bg-gray-300 text-gray-500 cursor-wait":"bg-primary text-white ")},E.loading?"Loading...":"Sign In")))};var w=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bg-gray-300 w-full"},r.a.createElement("div",{className:"flex-col flex justify-center h-screen md:w-1/3 lg:w-1/4 mx-auto"},r.a.createElement("div",{className:"bg-white mb-16 pt-4"},r.a.createElement("h1",{className:"text-center text-3xl font-heading font-semibold"},"RxCP"),r.a.createElement(v,null)))))},y=a(14);var x=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"404 Page Not Found."))},j=a(31);var N=function(e){var t=e.component,a=Object(j.a)(e,["component"]),n=d(),l=localStorage.getItem("token");return r.a.createElement(f.b,Object.assign({},a,{render:function(e){return n.authToken||l?r.a.createElement(t,e):r.a.createElement(f.a,{to:"/admin/login"})}}))};var k=function(){var e=Object(n.useState)(""),t=Object(c.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");e&&(g.a.defaults.headers.common.Authorization="Bearer ".concat(e),g.a.post("/api/auth/check").catch((function(e){l(""),localStorage.setItem("token",""),window.location.reload()})))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(u.Provider,{value:{authToken:a,setAuthToken:function(e){localStorage.setItem("token",e),l(e)}}},r.a.createElement(y.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/admin/login",component:w}),r.a.createElement(N,{exact:!0,path:"/",component:m}),r.a.createElement(N,{path:"/admin",component:m}),r.a.createElement(N,{path:"/dashboard",component:m}),r.a.createElement(f.b,{path:"*"},r.a.createElement(x,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.fa63fc3d.chunk.js.map